module.exports = {
  PENINSULA_TILE_LOOKUP: {
    "14 26": { i: 14, j: 26 },
    "3 31": { i: 3, j: 31 },
    "3 30": { i: 3, j: 30 },
    "4 30": { i: 4, j: 30 },
    "3 29": { i: 3, j: 29 },
    "3 28": { i: 3, j: 28 },
    "3 32": { i: 3, j: 32 },
    "4 32": { i: 4, j: 32 },
    "5 32": { i: 5, j: 32 },
    "6 32": { i: 6, j: 32 },
    "7 32": { i: 7, j: 32 },
    "8 32": { i: 8, j: 32 },
    "9 32": { i: 9, j: 32 },
    "10 32": { i: 10, j: 32 },
    "11 32": { i: 11, j: 32 },
    "12 32": { i: 12, j: 32 },
    "13 32": { i: 13, j: 32 },
    "14 32": { i: 14, j: 32 },
    "15 32": { i: 15, j: 32 },
    "16 32": { i: 16, j: 32 },
    "17 32": { i: 17, j: 32 },
    "17 31": { i: 17, j: 31 },
    "4 28": { i: 4, j: 28 },
    "4 27": { i: 4, j: 27 },
    "4 26": { i: 4, j: 26 },
    "4 25": { i: 4, j: 25 },
    "4 24": { i: 4, j: 24 },
    "4 23": { i: 4, j: 23 },
    "4 22": { i: 4, j: 22 },
    "5 21": { i: 5, j: 21 },
    "5 20": { i: 5, j: 20 },
    "5 19": { i: 5, j: 19 },
    "6 19": { i: 6, j: 19 },
    "6 18": { i: 6, j: 18 },
    "5 16": { i: 5, j: 16 },
    "6 17": { i: 6, j: 17 },
    "4 16": { i: 4, j: 16 },
    "3 15": { i: 3, j: 15 },
    "3 14": { i: 3, j: 14 },
    "3 13": { i: 3, j: 13 },
    "2 13": { i: 2, j: 13 },
    "2 12": { i: 2, j: 12 },
    "2 11": { i: 2, j: 11 },
    "3 9": { i: 3, j: 9 },
    "3 10": { i: 3, j: 10 },
    "3 8": { i: 3, j: 8 },
    "3 7": { i: 3, j: 7 },
    "4 7": { i: 4, j: 7 },
    "4 6": { i: 4, j: 6 },
    "5 5": { i: 5, j: 5 },
    "6 5": { i: 6, j: 5 },
    "7 4": { i: 7, j: 4 },
    "8 5": { i: 8, j: 5 },
    "9 4": { i: 9, j: 4 },
    "7 3": { i: 7, j: 3 },
    "6 4": { i: 6, j: 4 },
    "6 3": { i: 6, j: 3 },
    "5 2": { i: 5, j: 2 },
    "8 4": { i: 8, j: 4 },
    "5 1": { i: 5, j: 1 },
    "4 1": { i: 4, j: 1 },
    "10 5": { i: 10, j: 5 },
    "11 5": { i: 11, j: 5 },
    "13 5": { i: 13, j: 5 },
    "14 7": { i: 14, j: 7 },
    "15 7": { i: 15, j: 7 },
    "16 8": { i: 16, j: 8 },
    "17 8": { i: 17, j: 8 },
    "18 8": { i: 18, j: 8 },
    "19 7": { i: 19, j: 7 },
    "20 7": { i: 20, j: 7 },
    "21 6": { i: 21, j: 6 },
    "22 6": { i: 22, j: 6 },
    "16 9": { i: 16, j: 9 },
    "15 9": { i: 15, j: 9 },
    "14 10": { i: 14, j: 10 },
    "13 11": { i: 13, j: 11 },
    "14 11": { i: 14, j: 11 },
    "12 13": { i: 12, j: 13 },
    "12 12": { i: 12, j: 12 },
    "12 14": { i: 12, j: 14 },
    "13 14": { i: 13, j: 14 },
    "13 15": { i: 13, j: 15 },
    "12 16": { i: 12, j: 16 },
    "12 17": { i: 12, j: 17 },
    "11 17": { i: 11, j: 17 },
    "10 19": { i: 10, j: 19 },
    "10 21": { i: 10, j: 21 },
    "11 21": { i: 11, j: 21 },
    "11 22": { i: 11, j: 22 },
    "12 23": { i: 12, j: 23 },
    "12 24": { i: 12, j: 24 },
    "12 25": { i: 12, j: 25 },
    "13 24": { i: 13, j: 24 },
    "13 25": { i: 13, j: 25 },
    "13 26": { i: 13, j: 26 },
    "14 27": { i: 14, j: 27 },
    "15 27": { i: 15, j: 27 },
    "15 28": { i: 15, j: 28 },
    "16 29": { i: 16, j: 29 },
    "16 30": { i: 16, j: 30 },
    "17 30": { i: 17, j: 30 },
    "18 31": { i: 18, j: 31 },
    "19 31": { i: 19, j: 31 },
    "20 32": { i: 20, j: 32 },
    "18 32": { i: 18, j: 32 },
    "19 32": { i: 19, j: 32 },
    "21 32": { i: 21, j: 32 },
    "2 32": { i: 2, j: 32 },
    "12 5": { i: 12, j: 5 },
    "13 6": { i: 13, j: 6 },
    "11 4": { i: 11, j: 4 },
    "14 6": { i: 14, j: 6 },
    "4 29": { i: 4, j: 29 },
    "5 29": { i: 5, j: 29 },
    "5 30": { i: 5, j: 30 },
    "4 31": { i: 4, j: 31 },
    "5 31": { i: 5, j: 31 },
    "6 31": { i: 6, j: 31 },
    "7 31": { i: 7, j: 31 },
    "8 31": { i: 8, j: 31 },
    "9 31": { i: 9, j: 31 },
    "10 31": { i: 10, j: 31 },
    "11 31": { i: 11, j: 31 },
    "12 31": { i: 12, j: 31 },
    "13 31": { i: 13, j: 31 },
    "14 31": { i: 14, j: 31 },
    "15 31": { i: 15, j: 31 },
    "16 31": { i: 16, j: 31 },
    "15 30": { i: 15, j: 30 },
    "6 30": { i: 6, j: 30 },
    "7 30": { i: 7, j: 30 },
    "8 30": { i: 8, j: 30 },
    "9 30": { i: 9, j: 30 },
    "10 30": { i: 10, j: 30 },
    "11 30": { i: 11, j: 30 },
    "12 30": { i: 12, j: 30 },
    "13 30": { i: 13, j: 30 },
    "14 30": { i: 14, j: 30 },
    "15 29": { i: 15, j: 29 },
    "5 28": { i: 5, j: 28 },
    "6 29": { i: 6, j: 29 },
    "7 29": { i: 7, j: 29 },
    "8 29": { i: 8, j: 29 },
    "9 29": { i: 9, j: 29 },
    "10 29": { i: 10, j: 29 },
    "11 28": { i: 11, j: 28 },
    "11 29": { i: 11, j: 29 },
    "12 29": { i: 12, j: 29 },
    "13 29": { i: 13, j: 29 },
    "13 28": { i: 13, j: 28 },
    "14 29": { i: 14, j: 29 },
    "14 28": { i: 14, j: 28 },
    "13 27": { i: 13, j: 27 },
    "12 28": { i: 12, j: 28 },
    "5 27": { i: 5, j: 27 },
    "6 28": { i: 6, j: 28 },
    "7 28": { i: 7, j: 28 },
    "8 28": { i: 8, j: 28 },
    "9 28": { i: 9, j: 28 },
    "10 28": { i: 10, j: 28 },
    "11 27": { i: 11, j: 27 },
    "12 27": { i: 12, j: 27 },
    "5 25": { i: 5, j: 25 },
    "5 26": { i: 5, j: 26 },
    "6 27": { i: 6, j: 27 },
    "7 27": { i: 7, j: 27 },
    "9 27": { i: 9, j: 27 },
    "10 27": { i: 10, j: 27 },
    "11 26": { i: 11, j: 26 },
    "12 26": { i: 12, j: 26 },
    "5 22": { i: 5, j: 22 },
    "5 23": { i: 5, j: 23 },
    "5 24": { i: 5, j: 24 },
    "6 26": { i: 6, j: 26 },
    "7 26": { i: 7, j: 26 },
    "8 27": { i: 8, j: 27 },
    "9 26": { i: 9, j: 26 },
    "10 26": { i: 10, j: 26 },
    "11 25": { i: 11, j: 25 },
    "6 25": { i: 6, j: 25 },
    "7 25": { i: 7, j: 25 },
    "8 26": { i: 8, j: 26 },
    "9 25": { i: 9, j: 25 },
    "10 25": { i: 10, j: 25 },
    "11 24": { i: 11, j: 24 },
    "6 24": { i: 6, j: 24 },
    "7 24": { i: 7, j: 24 },
    "8 25": { i: 8, j: 25 },
    "9 24": { i: 9, j: 24 },
    "10 24": { i: 10, j: 24 },
    "11 23": { i: 11, j: 23 },
    "6 23": { i: 6, j: 23 },
    "8 24": { i: 8, j: 24 },
    "8 21": { i: 8, j: 21 },
    "9 23": { i: 9, j: 23 },
    "10 23": { i: 10, j: 23 },
    "10 22": { i: 10, j: 22 },
    "9 22": { i: 9, j: 22 },
    "8 23": { i: 8, j: 23 },
    "7 22": { i: 7, j: 22 },
    "6 22": { i: 6, j: 22 },
    "7 5": { i: 7, j: 5 },
    "6 6": { i: 6, j: 6 },
    "5 6": { i: 5, j: 6 },
    "4 8": { i: 4, j: 8 },
    "5 7": { i: 5, j: 7 },
    "6 7": { i: 6, j: 7 },
    "7 6": { i: 7, j: 6 },
    "8 6": { i: 8, j: 6 },
    "9 5": { i: 9, j: 5 },
    "4 9": { i: 4, j: 9 },
    "5 8": { i: 5, j: 8 },
    "6 8": { i: 6, j: 8 },
    "7 7": { i: 7, j: 7 },
    "9 6": { i: 9, j: 6 },
    "10 6": { i: 10, j: 6 },
    "8 7": { i: 8, j: 7 },
    "12 6": { i: 12, j: 6 },
    "4 10": { i: 4, j: 10 },
    "5 9": { i: 5, j: 9 },
    "6 9": { i: 6, j: 9 },
    "7 8": { i: 7, j: 8 },
    "8 8": { i: 8, j: 8 },
    "9 7": { i: 9, j: 7 },
    "10 7": { i: 10, j: 7 },
    "11 6": { i: 11, j: 6 },
    "3 11": { i: 3, j: 11 },
    "4 11": { i: 4, j: 11 },
    "5 10": { i: 5, j: 10 },
    "6 10": { i: 6, j: 10 },
    "7 9": { i: 7, j: 9 },
    "8 9": { i: 8, j: 9 },
    "9 8": { i: 9, j: 8 },
    "10 8": { i: 10, j: 8 },
    "11 7": { i: 11, j: 7 },
    "12 7": { i: 12, j: 7 },
    "13 7": { i: 13, j: 7 },
    "3 12": { i: 3, j: 12 },
    "4 12": { i: 4, j: 12 },
    "5 11": { i: 5, j: 11 },
    "6 11": { i: 6, j: 11 },
    "7 10": { i: 7, j: 10 },
    "8 10": { i: 8, j: 10 },
    "9 9": { i: 9, j: 9 },
    "10 9": { i: 10, j: 9 },
    "11 8": { i: 11, j: 8 },
    "12 8": { i: 12, j: 8 },
    "14 8": { i: 14, j: 8 },
    "15 8": { i: 15, j: 8 },
    "4 13": { i: 4, j: 13 },
    "5 12": { i: 5, j: 12 },
    "6 12": { i: 6, j: 12 },
    "7 11": { i: 7, j: 11 },
    "8 11": { i: 8, j: 11 },
    "9 10": { i: 9, j: 10 },
    "10 10": { i: 10, j: 10 },
    "11 9": { i: 11, j: 9 },
    "12 9": { i: 12, j: 9 },
    "13 8": { i: 13, j: 8 },
    "14 9": { i: 14, j: 9 },
    "4 14": { i: 4, j: 14 },
    "5 13": { i: 5, j: 13 },
    "6 13": { i: 6, j: 13 },
    "7 12": { i: 7, j: 12 },
    "8 12": { i: 8, j: 12 },
    "9 11": { i: 9, j: 11 },
    "10 11": { i: 10, j: 11 },
    "11 10": { i: 11, j: 10 },
    "12 10": { i: 12, j: 10 },
    "13 9": { i: 13, j: 9 },
    "4 15": { i: 4, j: 15 },
    "5 14": { i: 5, j: 14 },
    "6 14": { i: 6, j: 14 },
    "8 13": { i: 8, j: 13 },
    "9 12": { i: 9, j: 12 },
    "7 13": { i: 7, j: 13 },
    "10 12": { i: 10, j: 12 },
    "11 11": { i: 11, j: 11 },
    "12 11": { i: 12, j: 11 },
    "13 10": { i: 13, j: 10 },
    "5 15": { i: 5, j: 15 },
    "6 15": { i: 6, j: 15 },
    "7 14": { i: 7, j: 14 },
    "8 14": { i: 8, j: 14 },
    "9 13": { i: 9, j: 13 },
    "10 13": { i: 10, j: 13 },
    "11 12": { i: 11, j: 12 },
    "6 16": { i: 6, j: 16 },
    "7 15": { i: 7, j: 15 },
    "8 15": { i: 8, j: 15 },
    "9 14": { i: 9, j: 14 },
    "10 14": { i: 10, j: 14 },
    "11 13": { i: 11, j: 13 },
    "7 16": { i: 7, j: 16 },
    "8 16": { i: 8, j: 16 },
    "9 15": { i: 9, j: 15 },
    "10 15": { i: 10, j: 15 },
    "11 14": { i: 11, j: 14 },
    "12 15": { i: 12, j: 15 },
    "11 15": { i: 11, j: 15 },
    "10 16": { i: 10, j: 16 },
    "9 16": { i: 9, j: 16 },
    "8 17": { i: 8, j: 17 },
    "7 17": { i: 7, j: 17 },
    "8 18": { i: 8, j: 18 },
    "9 17": { i: 9, j: 17 },
    "7 21": { i: 7, j: 21 },
    "9 20": { i: 9, j: 20 },
    "8 22": { i: 8, j: 22 },
    "9 21": { i: 9, j: 21 },
    "10 20": { i: 10, j: 20 },
    "10 18": { i: 10, j: 18 },
    "11 18": { i: 11, j: 18 },
    "10 17": { i: 10, j: 17 },
    "11 16": { i: 11, j: 16 },
    "5 17": { i: 5, j: 17 },
    "7 18": { i: 7, j: 18 },
    "6 20": { i: 6, j: 20 },
    "6 21": { i: 6, j: 21 },
    "7 20": { i: 7, j: 20 },
    "7 19": { i: 7, j: 19 },
    "8 20": { i: 8, j: 20 },
    "8 19": { i: 8, j: 19 },
    "9 19": { i: 9, j: 19 },
    "9 18": { i: 9, j: 18 },
    "7 23": { i: 7, j: 23 },
    "3 27": { i: 3, j: 27 }
  },
  BRIDGE_TILES: {
    "6 4": { i: 6, j: 4 },
    "6 3": { i: 6, j: 3 },
    "7 3": { i: 7, j: 3 },
    "5 2": { i: 5, j: 2 },
    "5 1": { i: 5, j: 1 },
    "4 1": { i: 4, j: 1 },
    "8 4": { i: 8, j: 4 },
    "7 4": { i: 7, j: 4 },
    "17 8": { i: 17, j: 8 },
    "18 8": { i: 18, j: 8 },
    "19 7": { i: 19, j: 7 },
    "20 7": { i: 20, j: 7 },
    "21 6": { i: 21, j: 6 },
    "22 6": { i: 22, j: 6 },
    "23 5": { i: 23, j: 5 }
  },
  returnNumber: (num, fallback) => {
    return num && !Number.isNaN(num) ? num : fallback ? fallback : 0;
  },
  getRandomIntInRange: (min = 0, max = 1) => {
    // doesn't work with negative numbers
    const _min = Math.ceil(min);
    const _max = Math.floor(max + 1);
    const randomInt = Math.floor(Math.random() * (_max - _min) + _min);
    return randomInt;
  },
  getTileXAndY: ({ i, j, scale }) => {
    const x = (i === 0 ? i * 45 - 25 : i * 45 + 25 * (i - 1)) * scale;
    const y = (i % 2 ? j * 80 + 40 : j * 80) * scale;
    return { x, y };
  },
  getRandAdjacentTile: ({ i, j }) => {
    let newTile = { i: -1, j: -1 };
    while (!this.PENINSULA_TILE_LOOKUP[`${newTile.i} ${newTile.j}`])
      newTile = {
        i: Math.random() > 0.66 ? i + 1 : Math.random() > 0.33 ? i : i - 1,
        j: Math.random() > 0.66 ? j + 1 : Math.random() > 0.33 ? j : j - 1
      };
    return newTile;
  },
  getRandomAdjacentLocation: (location, scale) => {
    const tile = this.getTileIAndJFromCharXAndY(location.x, location.y, scale);
    if (tile) {
      const highlightedTiles = Object.values(this.PENINSULA_TILE_LOOKUP)
        .map(v => (this.isAdjacent(tile, { i: v.i, j: v.j }) ? v : null))
        .filter(v => v !== null);
      const randInt = this.getRandomIntInRange({
        max: highlightedTiles.length - 1
      });
      const { i, j } = highlightedTiles[randInt];
      return this.getCharXAndY({ i, j, scale });
    }
  },
  getCharXAndY: ({ i, j, scale }) => {
    const x =
      (i === 0 ? i * 45 - 25 : i * 45 + 25 * (i - 1)) * scale + 52.5 * scale;
    const y = (i % 2 ? j * 80 + 40 : j * 80) * scale + 42.5 * scale;
    return { x, y };
  },
  getManaWellXAndY: ({ i, j, scale }) => {
    return { x: (i * 42 + 20) * scale, y: (j * 15 - 5) * scale };
  },
  getIAndJFromManaWellXAndY: ({ x, y, scale }) => {
    return { i: (x / scale - 20) / 42, j: (y / scale + 5) / 15 };
  },
  getTileIAndJFromCharXAndY: (xToFind, yToFind, scale) => {
    return Object.values(this.PENINSULA_TILE_LOOKUP).find(tile => {
      const { i, j } = tile;
      const { x, y } = this.getCharXAndY({ i, j, scale });
      return x === xToFind && y === yToFind;
    });
  },
  getDistance: (to, from) => {
    return Math.sqrt(
      (to.x - from.x) * (to.x - from.x) + (to.y - from.y) * (to.y - from.y)
    );
  },
  movePiece: (data, setData, scale) => {
    const _data = [...data];
    for (let i = 0; i < _data.length; i++) {
      if (
        _data[i].charLocation &&
        _data[i].moveFromLocation &&
        _data[i].moveToLocation &&
        // (!_data[i].isThere ||
        // _data[i].moveToTiles.length
        // )
      ) {
        const { newLocation, hasArrived } = this.moveTo({
          currentLocation: _data[i].charLocation,
          moveFromLocation: _data[i].moveFromLocation,
          moveToLocation: _data[i].moveToLocation,
          moveSpeed: 5
        });
        _data[i].charLocation = newLocation;
        _data[i].isThere = hasArrived;
        const [nextTile, ...tiles] = _data[i].moveToTiles;
        if (
          // _data[i].isThere &&
          // _data[i].moveToTiles.length
          nextTile
        ) {
          _data[i].tile = nextTile;
          _data[i].moveToTiles = tiles;
          _data[i].moveFromLocation = newLocation;
          _data[i].moveToLocation = this.getCharXAndY({
            ...nextTile,
            scale
          });
        }
      }
    }
    setData(_data);
  },
  moveTo: ({
    currentLocation,
    moveFromLocation,
    moveToLocation,
    moveSpeed
  }) => {
    const distanceFromStart = this.getDistance(
      moveFromLocation,
      currentLocation
    );
    const distanceToFinish = this.getDistance(moveToLocation, currentLocation);
    const totalDistance = this.getDistance(moveFromLocation, moveToLocation);
    const x_To = moveToLocation.x;
    const y_To = moveToLocation.y;
    const { x, y } = currentLocation;
    const x_dir = (x_To - x) / distanceToFinish;
    const y_dir = (y_To - y) / distanceToFinish;
    const hasArrived =
      distanceToFinish < moveSpeed || distanceFromStart > totalDistance;
    return {
      newLocation: {
        x: x + x_dir * moveSpeed,
        y: y + y_dir * moveSpeed
      },
      hasArrived
    };
  },
  getFlattenedArrayIndex: (i, j, ROW_LENGTH = 33) => {
    return ROW_LENGTH * i + j;
  },
  getIndicesFromFlattenedArrayIndex: (k, ROW_LENGTH = 33) => {
    const i = Math.floor(k / ROW_LENGTH);
    const j = k % ROW_LENGTH;
    return { i, j };
  },
  isAdjacent: (tile1, tile2) => {
    const key1 = `${tile1.i} ${tile1.j}`;
    const key2 = `${tile2.i} ${tile2.j}`;
    return this.PENINSULA_TILE_LOOKUP[key1] !== undefined &&
      this.PENINSULA_TILE_LOOKUP[key2] !== undefined
      ? tile1.i % 2
        ? Math.abs(tile1.i - tile2.i) < 2 &&
          Math.abs(tile1.j - tile2.j) < 2 &&
          !(tile1.i - 1 === tile2.i && tile1.j - 1 === tile2.j) &&
          !(tile1.i + 1 === tile2.i && tile1.j - 1 === tile2.j)
        : Math.abs(tile1.i - tile2.i) < 2 &&
          Math.abs(tile1.j - tile2.j) < 2 &&
          !(tile1.i - 1 === tile2.i && tile1.j + 1 === tile2.j) &&
          !(tile1.i + 1 === tile2.i && tile1.j + 1 === tile2.j)
      : false;
  },
  getRandomCharacterLocation: scale => {
    const tileIndices = Object.values(this.PENINSULA_TILE_LOOKUP);
    const randomInt = this.getRandomIntInRange({ max: tileIndices.length - 1 });
    const { i, j } = tileIndices[randomInt];
    const { x, y } = this.getCharXAndY({ i, j, scale });
    return { x, y };
  },
  checkIsInManaPool: ({ setPlayerData, kaiju2Data, kaiju1Data }) => {
    setPlayerData(_playerData =>
      _playerData.map((p, i) => {
        return {
          ...p,
          isInManaPool: this.isLocatonInsidePolygon(
            i
              ? kaiju2Data.map(k => k.charLocation)
              : kaiju1Data.map(k => k.charLocation),
            p.charLocation
          )
        };
      })
    );
  },
  isLocatonInsidePolygon: (polygon, p) => {
    var isInside = false;
    var minX = polygon[0].x,
      maxX = polygon[0].x;
    var minY = polygon[0].y,
      maxY = polygon[0].y;
    for (var n = 1; n < polygon.length; n++) {
      var q = polygon[n];
      minX = Math.min(q.x, minX);
      maxX = Math.max(q.x, maxX);
      minY = Math.min(q.y, minY);
      maxY = Math.max(q.y, maxY);
    }
    if (p.x < minX || p.x > maxX || p.y < minY || p.y > maxY) {
      return false;
    }
    var i = 0,
      j = polygon.length - 1;
    for (i, j; i < polygon.length; j = i++) {
      if (
        polygon[i].y > p.y != polygon[j].y > p.y &&
        p.x <
          ((polygon[j].x - polygon[i].x) * (p.y - polygon[i].y)) /
            (polygon[j].y - polygon[i].y) +
            polygon[i].x
      ) {
        isInside = !isInside;
      }
    }
    return isInside;
  },
  getAdjacentTiles: tile => {
    return Object.values(this.PENINSULA_TILE_LOOKUP).filter(t =>
      isAdjacent(t, tile)
    );
  },
  findPath: (start, goal, scale) => {
    let count = 0;
    const duplicateLookup = {};
    return recur(start, [], count).filter(t => {
      if (!duplicateLookup[`${t.i} ${t.j}`]) {
        duplicateLookup[`${t.i} ${t.j}`] = t;
        return t;
      }
    });
    function recur(currTile, arr, count) {
      if ((currTile.i === goal.i && currTile.j === goal.j) || count > 400)
        return arr;
      // produce all possible adjacent tile indices to currTile
      const adjacentTiles = this.getAdjacentTiles(currTile);
      // get all charXAndY for each confirmed adjacent tile
      const goalXY = this.getCharXAndY({ ...goal, scale });
      const test = this.getCharXAndY({ ...adjacentTiles[0], scale });
      const shortest = {
        tile: adjacentTiles[0],
        distance: this.getDistance(test, goalXY)
      };
      adjacentTiles.forEach(t => {
        const adjXY = this.getCharXAndY({ ...t, scale });
        const distance = this.getDistance(adjXY, goalXY);
        if (distance < shortest.distance) {
          shortest.tile = t;
          shortest.distance = distance;
        }
      });
      if (shortest.tile.i === currTile.i && shortest.tile.j === currTile.j) {
        const randTile = this.getRandAdjacentTile(currTile);
        const _arr = [...arr, randTile];
        return recur(randTile, _arr, count + 1);
      } else {
        const _arr = [...arr, shortest.tile];
        return recur(shortest.tile, _arr, count + 1);
      }
    }
  }
};
